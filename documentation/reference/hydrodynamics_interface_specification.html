
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Hydrodynamics Interface Definition &#8212; AMUSE 11.0 documentation</title>
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Radiative Transfer Interface Definition" href="radiative_transfer_interface_specification.html" />
    <link rel="prev" title="Stellar Evolution Interface Definition" href="stellar_evolution_interface_specification.html" />
     
    <link rel="stylesheet" href="../_static/default.css" type="text/css">

  </head><body>
    <div id="banner">
      <div id="header" py:choose="">
        <h1><a href="/">Amuse</a></h1>
      </div>
      <div style="clear:both"></div>
    </div>
    <div class="nav" id="mainnav">
    <ul>
      <li class="first"><a href="/wiki">Wiki</a>
    </ul>
    </div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a></li>
        <li class="right" >
          <a href="radiative_transfer_interface_specification.html" title="Radiative Transfer Interface Definition"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="stellar_evolution_interface_specification.html" title="Stellar Evolution Interface Definition"
             accesskey="P">previous</a></li>
    <li><a href="http://www.amusecode.org">Project Homepage</a> &raquo;</li>
    
        <li class="nav-item nav-item-0"><a href="../index.html">AMUSE 11.0 documentation</a></li>

          <li class="nav-item nav-item-1"><a href="index.html" >Reference documentation</a></li>
          <li class="nav-item nav-item-2"><a href="interface_specification.html" accesskey="U">Interface Specifications</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="hydrodynamics-interface-definition">
<h1>Hydrodynamics Interface Definition<a class="headerlink" href="#hydrodynamics-interface-definition" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>In this chapter we describe the common interface for all
hydrodynamics, grid based codes. For particle based, SPH codes see
the gravitational dynamics specifications.</p>
</div>
<div class="section" id="parameters">
<h2>Parameters<a class="headerlink" href="#parameters" title="Permalink to this headline">¶</a></h2>
<p>All parameters have to be accessed with functions following
the template of the <code class="docutils literal notranslate"><span class="pre">get_timestep</span></code> and <code class="docutils literal notranslate"><span class="pre">set_timestep</span></code> functions.
A parameter access function may only retrieve or
update the value of a single parameter. After all parameters have been set, the
<code class="docutils literal notranslate"><span class="pre">commit_parameters</span></code> function should be called,
this gives the code the opportunity prepare the model.</p>
<dl class="class">
<dt id="amuse.community.interface.hydro.HydrodynamicsInterface">
<em class="property">class </em><code class="descclassname">amuse.community.interface.hydro.</code><code class="descname">HydrodynamicsInterface</code><a class="headerlink" href="#amuse.community.interface.hydro.HydrodynamicsInterface" title="Permalink to this definition">¶</a></dt>
<dd><dl class="attribute">
<dt id="amuse.community.interface.hydro.HydrodynamicsInterface.commit_parameters">
<code class="descname">commit_parameters</code><a class="headerlink" href="#amuse.community.interface.hydro.HydrodynamicsInterface.commit_parameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform initialization in the code dependent on the
values of the parameters.
Called after the parameters have been set or updated.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">int32</span> <span class="nf">commit_parameters</span><span class="p">();</span>
</pre></div>
</div>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="k">FUNCTION </span><span class="n">commit_parameters</span><span class="p">()</span>
  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">commit_parameters</span>
<span class="k">END FUNCTION</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><dl class="docutils">
<dt>0 - OK</dt>
<dd>Code is initialized</dd>
<dt>-1 - ERROR</dt>
<dd>Error happened during initialization, this error needs to be further specified by every code implemention</dd>
<dt>-2 - ERROR</dt>
<dd>not yet implemented</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="grid-management">
<h2>Grid Management<a class="headerlink" href="#grid-management" title="Permalink to this headline">¶</a></h2>
<p>Most hydrodynamical codes work on grids or a hierarchy of grids. The following
methods define the functionality to setup and query the grids.</p>
<dl class="class">
<dt>
<em class="property">class </em><code class="descclassname">amuse.community.interface.hydro.</code><code class="descname">HydrodynamicsInterface</code></dt>
<dd><dl class="attribute">
<dt id="amuse.community.interface.hydro.HydrodynamicsInterface.get_index_of_position">
<code class="descname">get_index_of_position</code><a class="headerlink" href="#amuse.community.interface.hydro.HydrodynamicsInterface.get_index_of_position" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieves the i,j and k index of the grid cell containing the
given x, y and z position. The cell is looked up
in the grid specified by index_of_grid.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">int32</span> <span class="nf">get_index_of_position</span><span class="p">(</span><span class="n">float64</span> <span class="n">x</span><span class="p">,</span> <span class="n">float64</span> <span class="n">y</span><span class="p">,</span> <span class="n">float64</span> <span class="n">z</span><span class="p">,</span> 
  <span class="n">int32</span> <span class="n">index_of_grid</span><span class="p">,</span> <span class="n">float64</span> <span class="o">*</span> <span class="n">i</span><span class="p">,</span> <span class="n">float64</span> <span class="o">*</span> <span class="n">j</span><span class="p">,</span> <span class="n">float64</span> <span class="o">*</span> <span class="n">k</span><span class="p">);</span>
</pre></div>
</div>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="k">FUNCTION </span><span class="n">get_index_of_position</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">index_of_grid</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span>
  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">index_of_grid</span>
  <span class="kt">DOUBLE PRECISION</span> <span class="kd">::</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span>
  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">get_index_of_position</span>
<span class="k">END FUNCTION</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x</strong> (<em>float64</em><em>, </em><em>IN</em>) – </li>
<li><strong>y</strong> (<em>float64</em><em>, </em><em>IN</em>) – </li>
<li><strong>z</strong> (<em>float64</em><em>, </em><em>IN</em>) – </li>
<li><strong>index_of_grid</strong> (<em>int32</em><em>, </em><em>IN</em>) – </li>
<li><strong>i</strong> (<em>float64</em><em>, </em><em>OUT</em>) – </li>
<li><strong>j</strong> (<em>float64</em><em>, </em><em>OUT</em>) – </li>
<li><strong>k</strong> (<em>float64</em><em>, </em><em>OUT</em>) – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="amuse.community.interface.hydro.HydrodynamicsInterface.get_index_range_inclusive">
<code class="descname">get_index_range_inclusive</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#amuse.community.interface.hydro.HydrodynamicsInterface.get_index_range_inclusive" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the min and max values of indices in each
direction. The range is inclusive, the min index
and max index both exist and can be queried.
The total number of cells in one direction
is max - min + 1.</p>
<p>The returntype is a list of 3 tuples, each tuples
contains the minimum and maximum value in the
index range.</p>
<p>Fo C/C++ codes the returned values will usually
be: ((0, nmeshx-1), (0, nmeshy-1), (0, nmeshz-1))</p>
<p>Fo Fortran codes the returned values will usually
be: ((1, nmeshx), (1, nmeshy), (1, nmeshz))</p>
</dd></dl>

<dl class="attribute">
<dt id="amuse.community.interface.hydro.HydrodynamicsInterface.get_position_of_index">
<code class="descname">get_position_of_index</code><a class="headerlink" href="#amuse.community.interface.hydro.HydrodynamicsInterface.get_position_of_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieves the x, y and z position of the center of
the cell with coordinates i, j, k in the grid specified
by the index_of_grid</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">int32</span> <span class="nf">get_position_of_index</span><span class="p">(</span><span class="n">int32</span> <span class="n">i</span><span class="p">,</span> <span class="n">int32</span> <span class="n">j</span><span class="p">,</span> <span class="n">int32</span> <span class="n">k</span><span class="p">,</span> 
  <span class="n">int32</span> <span class="n">index_of_grid</span><span class="p">,</span> <span class="n">float64</span> <span class="o">*</span> <span class="n">x</span><span class="p">,</span> <span class="n">float64</span> <span class="o">*</span> <span class="n">y</span><span class="p">,</span> <span class="n">float64</span> <span class="o">*</span> <span class="n">z</span><span class="p">);</span>
</pre></div>
</div>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="k">FUNCTION </span><span class="n">get_position_of_index</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">index_of_grid</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span>
  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">index_of_grid</span>
  <span class="kt">DOUBLE PRECISION</span> <span class="kd">::</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span>
  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">get_position_of_index</span>
<span class="k">END FUNCTION</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>i</strong> (<em>int32</em><em>, </em><em>IN</em>) – </li>
<li><strong>j</strong> (<em>int32</em><em>, </em><em>IN</em>) – </li>
<li><strong>k</strong> (<em>int32</em><em>, </em><em>IN</em>) – </li>
<li><strong>index_of_grid</strong> (<em>int32</em><em>, </em><em>IN</em>) – </li>
<li><strong>x</strong> (<em>float64</em><em>, </em><em>OUT</em>) – </li>
<li><strong>y</strong> (<em>float64</em><em>, </em><em>OUT</em>) – </li>
<li><strong>z</strong> (<em>float64</em><em>, </em><em>OUT</em>) – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="amuse.community.interface.hydro.HydrodynamicsInterface.set_boundary">
<code class="descname">set_boundary</code><span class="sig-paren">(</span><em>xbound1</em>, <em>xbound2</em>, <em>ybound1</em>, <em>ybound2</em>, <em>zbound1</em>, <em>zbound2</em><span class="sig-paren">)</span><a class="headerlink" href="#amuse.community.interface.hydro.HydrodynamicsInterface.set_boundary" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the boundary conditions on the grid. Boundaries can be:
“reflective”, “periodic”.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>xbound1</strong> – inner or left boundary in the x direction</li>
<li><strong>xbound2</strong> – outer or right boundary in the x direction</li>
<li><strong>ybound1</strong> – inner or front boundary in the y direction</li>
<li><strong>ybound2</strong> – outer or back boundary in the y direction</li>
<li><strong>zbound1</strong> – inner or bottom boundary in the z direction</li>
<li><strong>zbound1</strong> – outer or top boundary in the z direction</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="amuse.community.interface.hydro.HydrodynamicsInterface.setup_mesh">
<code class="descname">setup_mesh</code><span class="sig-paren">(</span><em>nmeshx</em>, <em>nmeshy</em>, <em>nmeshz</em>, <em>xlength</em>, <em>ylength</em>, <em>zlength</em><span class="sig-paren">)</span><a class="headerlink" href="#amuse.community.interface.hydro.HydrodynamicsInterface.setup_mesh" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the number of mesh cells in each direction, and the
length of the grid in each direction.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>nmeshx</strong> – number of mesh cells in the x direction</li>
<li><strong>nmeshy</strong> – number of mesh cells in the y direction</li>
<li><strong>nmeshz</strong> – number of mesh cells in the z direction</li>
<li><strong>xlength</strong> – total length of the grid in the x direction</li>
<li><strong>ylength</strong> – total length of the grid in the y direction</li>
<li><strong>zlength</strong> – total length of the grid in the z direction</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="grid-state">
<h2>Grid state<a class="headerlink" href="#grid-state" title="Permalink to this headline">¶</a></h2>
<p>Grid points in a hydrodynamics code have a well known, <em>minimal</em> state. This state is is defined
by a density, momentum density and energy density. The state can
be retrieved and updated with the following functions.</p>
<dl class="class">
<dt>
<em class="property">class </em><code class="descclassname">amuse.community.interface.hydro.</code><code class="descname">HydrodynamicsInterface</code></dt>
<dd><dl class="attribute">
<dt id="amuse.community.interface.hydro.HydrodynamicsInterface.get_grid_state">
<code class="descname">get_grid_state</code><a class="headerlink" href="#amuse.community.interface.hydro.HydrodynamicsInterface.get_grid_state" title="Permalink to this definition">¶</a></dt>
<dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">int32</span> <span class="nf">get_grid_state</span><span class="p">(</span><span class="n">int32</span> <span class="n">i</span><span class="p">,</span> <span class="n">int32</span> <span class="n">j</span><span class="p">,</span> <span class="n">int32</span> <span class="n">k</span><span class="p">,</span> <span class="n">int32</span> <span class="n">index_of_grid</span><span class="p">,</span> 
  <span class="n">float64</span> <span class="o">*</span> <span class="n">rho</span><span class="p">,</span> <span class="n">float64</span> <span class="o">*</span> <span class="n">rhovx</span><span class="p">,</span> <span class="n">float64</span> <span class="o">*</span> <span class="n">rhovy</span><span class="p">,</span> <span class="n">float64</span> <span class="o">*</span> <span class="n">rhovz</span><span class="p">,</span> 
  <span class="n">float64</span> <span class="o">*</span> <span class="n">en</span><span class="p">,</span> <span class="n">int32</span> <span class="n">number_of_points</span><span class="p">);</span>
</pre></div>
</div>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="k">FUNCTION </span><span class="n">get_grid_state</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">index_of_grid</span><span class="p">,</span> <span class="n">rho</span><span class="p">,</span> <span class="n">rhovx</span><span class="p">,</span> <span class="n">rhovy</span><span class="p">,</span> <span class="n">rhovz</span><span class="p">,</span>  <span class="p">&amp;</span>
    <span class="n">en</span><span class="p">,</span> <span class="n">number_of_points</span><span class="p">)</span>
  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">index_of_grid</span><span class="p">,</span> <span class="n">number_of_points</span>
  <span class="kt">DOUBLE PRECISION</span> <span class="kd">::</span> <span class="n">rho</span><span class="p">,</span> <span class="n">rhovx</span><span class="p">,</span> <span class="n">rhovy</span><span class="p">,</span> <span class="n">rhovz</span><span class="p">,</span> <span class="n">en</span>
  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">get_grid_state</span>
<span class="k">END FUNCTION</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>i</strong> (<em>int32</em><em>, </em><em>IN</em>) – </li>
<li><strong>j</strong> (<em>int32</em><em>, </em><em>IN</em>) – </li>
<li><strong>k</strong> (<em>int32</em><em>, </em><em>IN</em>) – </li>
<li><strong>index_of_grid</strong> (<em>int32</em><em>, </em><em>IN</em>) – </li>
<li><strong>rho</strong> (<em>float64</em><em>, </em><em>OUT</em>) – </li>
<li><strong>rhovx</strong> (<em>float64</em><em>, </em><em>OUT</em>) – </li>
<li><strong>rhovy</strong> (<em>float64</em><em>, </em><em>OUT</em>) – </li>
<li><strong>rhovz</strong> (<em>float64</em><em>, </em><em>OUT</em>) – </li>
<li><strong>en</strong> (<em>float64</em><em>, </em><em>OUT</em>) – </li>
<li><strong>number_of_points</strong> (<em>int32</em><em>,</em>) – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="amuse.community.interface.hydro.HydrodynamicsInterface.set_grid_state">
<code class="descname">set_grid_state</code><a class="headerlink" href="#amuse.community.interface.hydro.HydrodynamicsInterface.set_grid_state" title="Permalink to this definition">¶</a></dt>
<dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">int32</span> <span class="nf">set_grid_state</span><span class="p">(</span><span class="n">int32</span> <span class="n">i</span><span class="p">,</span> <span class="n">int32</span> <span class="n">j</span><span class="p">,</span> <span class="n">int32</span> <span class="n">k</span><span class="p">,</span> <span class="n">float64</span> <span class="n">rho</span><span class="p">,</span> 
  <span class="n">float64</span> <span class="n">rhovx</span><span class="p">,</span> <span class="n">float64</span> <span class="n">rhovy</span><span class="p">,</span> <span class="n">float64</span> <span class="n">rhovz</span><span class="p">,</span> <span class="n">float64</span> <span class="n">en</span><span class="p">,</span> 
  <span class="n">int32</span> <span class="n">index_of_grid</span><span class="p">,</span> <span class="n">int32</span> <span class="n">number_of_points</span><span class="p">);</span>
</pre></div>
</div>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="k">FUNCTION </span><span class="n">set_grid_state</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">rho</span><span class="p">,</span> <span class="n">rhovx</span><span class="p">,</span> <span class="n">rhovy</span><span class="p">,</span> <span class="n">rhovz</span><span class="p">,</span> <span class="n">en</span><span class="p">,</span>  <span class="p">&amp;</span>
    <span class="n">index_of_grid</span><span class="p">,</span> <span class="n">number_of_points</span><span class="p">)</span>
  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">index_of_grid</span><span class="p">,</span> <span class="n">number_of_points</span>
  <span class="kt">DOUBLE PRECISION</span> <span class="kd">::</span> <span class="n">rho</span><span class="p">,</span> <span class="n">rhovx</span><span class="p">,</span> <span class="n">rhovy</span><span class="p">,</span> <span class="n">rhovz</span><span class="p">,</span> <span class="n">en</span>
  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">set_grid_state</span>
<span class="k">END FUNCTION</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>i</strong> (<em>int32</em><em>, </em><em>IN</em>) – </li>
<li><strong>j</strong> (<em>int32</em><em>, </em><em>IN</em>) – </li>
<li><strong>k</strong> (<em>int32</em><em>, </em><em>IN</em>) – </li>
<li><strong>rho</strong> (<em>float64</em><em>, </em><em>IN</em>) – </li>
<li><strong>rhovx</strong> (<em>float64</em><em>, </em><em>IN</em>) – </li>
<li><strong>rhovy</strong> (<em>float64</em><em>, </em><em>IN</em>) – </li>
<li><strong>rhovz</strong> (<em>float64</em><em>, </em><em>IN</em>) – </li>
<li><strong>en</strong> (<em>float64</em><em>, </em><em>IN</em>) – </li>
<li><strong>index_of_grid</strong> (<em>int32</em><em>, </em><em>IN</em>) – </li>
<li><strong>number_of_points</strong> (<em>int32</em><em>,</em>) – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="grid-state-extension-mechanism">
<h2>Grid State, Extension Mechanism<a class="headerlink" href="#grid-state-extension-mechanism" title="Permalink to this headline">¶</a></h2>
<p>Not all information of a grid point can be transferred with the fill_grid_state and get_grid_state functions. To
support other properties (like pressure or MHD properties), the code can define <code class="docutils literal notranslate"><span class="pre">get_</span></code> and <code class="docutils literal notranslate"><span class="pre">set_</span></code> functions. These
functions must get or set one scalar property (1 argument) or a vector property (3 arguments)</p>
<dl class="class">
<dt>
<em class="property">class </em><code class="descclassname">amuse.community.interface.hydro.</code><code class="descname">HydrodynamicsInterface</code></dt>
<dd><dl class="attribute">
<dt id="amuse.community.interface.hydro.HydrodynamicsInterface.set_grid_density">
<code class="descname">set_grid_density</code><a class="headerlink" href="#amuse.community.interface.hydro.HydrodynamicsInterface.set_grid_density" title="Permalink to this definition">¶</a></dt>
<dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">int32</span> <span class="nf">set_grid_density</span><span class="p">(</span><span class="n">int32</span> <span class="n">i</span><span class="p">,</span> <span class="n">int32</span> <span class="n">j</span><span class="p">,</span> <span class="n">int32</span> <span class="n">k</span><span class="p">,</span> <span class="n">float64</span> <span class="n">rho</span><span class="p">,</span> 
  <span class="n">int32</span> <span class="n">index_of_grid</span><span class="p">,</span> <span class="n">int32</span> <span class="n">number_of_points</span><span class="p">);</span>
</pre></div>
</div>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="k">FUNCTION </span><span class="n">set_grid_density</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">rho</span><span class="p">,</span> <span class="n">index_of_grid</span><span class="p">,</span> <span class="n">number_of_points</span><span class="p">)</span>
  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">index_of_grid</span><span class="p">,</span> <span class="n">number_of_points</span>
  <span class="kt">DOUBLE PRECISION</span> <span class="kd">::</span> <span class="n">rho</span>
  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">set_grid_density</span>
<span class="k">END FUNCTION</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>i</strong> (<em>int32</em><em>, </em><em>IN</em>) – </li>
<li><strong>j</strong> (<em>int32</em><em>, </em><em>IN</em>) – </li>
<li><strong>k</strong> (<em>int32</em><em>, </em><em>IN</em>) – </li>
<li><strong>rho</strong> (<em>float64</em><em>, </em><em>IN</em>) – </li>
<li><strong>index_of_grid</strong> (<em>int32</em><em>, </em><em>IN</em>) – </li>
<li><strong>number_of_points</strong> (<em>int32</em><em>,</em>) – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="amuse.community.interface.hydro.HydrodynamicsInterface.set_grid_energy_density">
<code class="descname">set_grid_energy_density</code><a class="headerlink" href="#amuse.community.interface.hydro.HydrodynamicsInterface.set_grid_energy_density" title="Permalink to this definition">¶</a></dt>
<dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">int32</span> <span class="nf">set_grid_energy_density</span><span class="p">(</span><span class="n">int32</span> <span class="n">i</span><span class="p">,</span> <span class="n">int32</span> <span class="n">j</span><span class="p">,</span> <span class="n">int32</span> <span class="n">k</span><span class="p">,</span> <span class="n">float64</span> <span class="n">en</span><span class="p">,</span> 
  <span class="n">int32</span> <span class="n">index_of_grid</span><span class="p">,</span> <span class="n">int32</span> <span class="n">number_of_points</span><span class="p">);</span>
</pre></div>
</div>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="k">FUNCTION </span><span class="n">set_grid_energy_density</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">en</span><span class="p">,</span> <span class="n">index_of_grid</span><span class="p">,</span>  <span class="p">&amp;</span>
    <span class="n">number_of_points</span><span class="p">)</span>
  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">index_of_grid</span><span class="p">,</span> <span class="n">number_of_points</span>
  <span class="kt">DOUBLE PRECISION</span> <span class="kd">::</span> <span class="n">en</span>
  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">set_grid_energy_density</span>
<span class="k">END FUNCTION</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>i</strong> (<em>int32</em><em>, </em><em>IN</em>) – </li>
<li><strong>j</strong> (<em>int32</em><em>, </em><em>IN</em>) – </li>
<li><strong>k</strong> (<em>int32</em><em>, </em><em>IN</em>) – </li>
<li><strong>en</strong> (<em>float64</em><em>, </em><em>IN</em>) – </li>
<li><strong>index_of_grid</strong> (<em>int32</em><em>, </em><em>IN</em>) – </li>
<li><strong>number_of_points</strong> (<em>int32</em><em>,</em>) – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="amuse.community.interface.hydro.HydrodynamicsInterface.set_grid_momentum_density">
<code class="descname">set_grid_momentum_density</code><a class="headerlink" href="#amuse.community.interface.hydro.HydrodynamicsInterface.set_grid_momentum_density" title="Permalink to this definition">¶</a></dt>
<dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">int32</span> <span class="nf">set_grid_momentum_density</span><span class="p">(</span><span class="n">int32</span> <span class="n">i</span><span class="p">,</span> <span class="n">int32</span> <span class="n">j</span><span class="p">,</span> <span class="n">int32</span> <span class="n">k</span><span class="p">,</span> 
  <span class="n">float64</span> <span class="n">rhovx</span><span class="p">,</span> <span class="n">float64</span> <span class="n">rhovy</span><span class="p">,</span> <span class="n">float64</span> <span class="n">rhovz</span><span class="p">,</span> <span class="n">int32</span> <span class="n">index_of_grid</span><span class="p">,</span> 
  <span class="n">int32</span> <span class="n">number_of_points</span><span class="p">);</span>
</pre></div>
</div>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="k">FUNCTION </span><span class="n">set_grid_momentum_density</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">rhovx</span><span class="p">,</span> <span class="n">rhovy</span><span class="p">,</span> <span class="n">rhovz</span><span class="p">,</span>  <span class="p">&amp;</span>
    <span class="n">index_of_grid</span><span class="p">,</span> <span class="n">number_of_points</span><span class="p">)</span>
  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">index_of_grid</span><span class="p">,</span> <span class="n">number_of_points</span>
  <span class="kt">DOUBLE PRECISION</span> <span class="kd">::</span> <span class="n">rhovx</span><span class="p">,</span> <span class="n">rhovy</span><span class="p">,</span> <span class="n">rhovz</span>
  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">set_grid_momentum_density</span>
<span class="k">END FUNCTION</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>i</strong> (<em>int32</em><em>, </em><em>IN</em>) – </li>
<li><strong>j</strong> (<em>int32</em><em>, </em><em>IN</em>) – </li>
<li><strong>k</strong> (<em>int32</em><em>, </em><em>IN</em>) – </li>
<li><strong>rhovx</strong> (<em>float64</em><em>, </em><em>IN</em>) – </li>
<li><strong>rhovy</strong> (<em>float64</em><em>, </em><em>IN</em>) – </li>
<li><strong>rhovz</strong> (<em>float64</em><em>, </em><em>IN</em>) – </li>
<li><strong>index_of_grid</strong> (<em>int32</em><em>, </em><em>IN</em>) – </li>
<li><strong>number_of_points</strong> (<em>int32</em><em>,</em>) – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="model-evolution">
<h2>Model evolution<a class="headerlink" href="#model-evolution" title="Permalink to this headline">¶</a></h2>
<p>The hydrodynamics codes evolve the properties all grid cells in time. The following functions
are needed to control the evolution in the code.</p>
<dl class="class">
<dt>
<em class="property">class </em><code class="descclassname">amuse.community.interface.hydro.</code><code class="descname">HydrodynamicsInterface</code></dt>
<dd><dl class="attribute">
<dt id="amuse.community.interface.hydro.HydrodynamicsInterface.initialize_grid">
<code class="descname">initialize_grid</code><a class="headerlink" href="#amuse.community.interface.hydro.HydrodynamicsInterface.initialize_grid" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform accounting before evolving the model. This method will
be called after setting the parameters and filling the grid points but
just before evolving the system</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">int32</span> <span class="nf">initialize_grid</span><span class="p">();</span>
</pre></div>
</div>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="k">FUNCTION </span><span class="n">initialize_grid</span><span class="p">()</span>
  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">initialize_grid</span>
<span class="k">END FUNCTION</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="diagnostics">
<h2>Diagnostics<a class="headerlink" href="#diagnostics" title="Permalink to this headline">¶</a></h2>
<p>The state of the code can be queried, before, during and after the model calculations. The following
function can be used to query the exact model time.</p>
<dl class="class">
<dt>
<em class="property">class </em><code class="descclassname">amuse.community.interface.hydro.</code><code class="descname">HydrodynamicsInterface</code></dt>
<dd><dl class="attribute">
<dt id="amuse.community.interface.hydro.HydrodynamicsInterface.get_time">
<code class="descname">get_time</code><a class="headerlink" href="#amuse.community.interface.hydro.HydrodynamicsInterface.get_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the current model time.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">int32</span> <span class="nf">get_time</span><span class="p">(</span><span class="n">float64</span> <span class="o">*</span> <span class="n">value</span><span class="p">);</span>
</pre></div>
</div>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="k">FUNCTION </span><span class="n">get_time</span><span class="p">(</span><span class="k">value</span><span class="p">)</span>
  <span class="kt">DOUBLE PRECISION</span> <span class="kd">::</span> <span class="k">value</span>
<span class="k">  </span><span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">get_time</span>
<span class="k">END FUNCTION</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>value</strong> (<em>float64</em><em>, </em><em>OUT</em>) – </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="external-fields">
<h2>External fields<a class="headerlink" href="#external-fields" title="Permalink to this headline">¶</a></h2>
<p>Some Hydrodynamics codes support external acceleration or potential fields. The following functions
can be used to enter a gravitational potential field.</p>
<dl class="class">
<dt>
<em class="property">class </em><code class="descclassname">amuse.community.interface.hydro.</code><code class="descname">HydrodynamicsInterface</code></dt>
<dd></dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Hydrodynamics Interface Definition</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#parameters">Parameters</a></li>
<li><a class="reference internal" href="#grid-management">Grid Management</a></li>
<li><a class="reference internal" href="#grid-state">Grid state</a></li>
<li><a class="reference internal" href="#grid-state-extension-mechanism">Grid State, Extension Mechanism</a></li>
<li><a class="reference internal" href="#model-evolution">Model evolution</a></li>
<li><a class="reference internal" href="#diagnostics">Diagnostics</a></li>
<li><a class="reference internal" href="#external-fields">External fields</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="stellar_evolution_interface_specification.html"
                        title="previous chapter">Stellar Evolution Interface Definition</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="radiative_transfer_interface_specification.html"
                        title="next chapter">Radiative Transfer Interface Definition</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/reference/hydrodynamics_interface_specification.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a></li>
        <li class="right" >
          <a href="radiative_transfer_interface_specification.html" title="Radiative Transfer Interface Definition"
             >next</a></li>
        <li class="right" >
          <a href="stellar_evolution_interface_specification.html" title="Stellar Evolution Interface Definition"
             >previous</a></li>
    <li><a href="http://www.amusecode.org">Project Homepage</a> &raquo;</li>
    
        <li class="nav-item nav-item-0"><a href="../index.html">AMUSE 11.0 documentation</a></li>

          <li class="nav-item nav-item-1"><a href="index.html" >Reference documentation</a></li>
          <li class="nav-item nav-item-2"><a href="interface_specification.html" >Interface Specifications</a></li> 
      </ul>
    </div>
    <!-- Piwik -->
<script type="text/javascript">
var pkBaseURL = (("https:" == document.location.protocol) ? "https://stats.amusecode.org/" : "http://stats.amusecode.org/");
document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
</script><script type="text/javascript">
try {
var piwikTracker = Piwik.getTracker(pkBaseURL + "piwik.php", 1);
piwikTracker.trackPageView();
piwikTracker.enableLinkTracking();
} catch( err ) {}
</script><noscript><p><img src="http://stats.amusecode.org/piwik.php?idsite=1" style="border:0" alt="" /></p></noscript>
<!-- End Piwik Tracking Code -->

    
    <div class="footer" role="contentinfo">
        &#169; Copyright 2009-2016 The AMUSE Team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.3.
    </div>

  </body>
</html>